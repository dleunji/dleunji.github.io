---
Title : "네트워크3"
layout : post
date : 2021-06-03
category : Network
blog : true
author : dleunji
description : 중간고사 내용 포함 정리
---

### OSI 7계층

![](https://1.bp.blogspot.com/-wtMZmsd3Wdw/W5Y8_ZlJzvI/AAAAAAAAAew/70nsmVdODV47cWgVAVOqFA6_0uGo0LunACLcBGAs/s1600/%25EA%25B7%25B8%25EB%25A6%25BC4.PNG)



**7계층 - 응용 계층**

- 사용자 인터페이스를 제공하여 사용자와 응용 프로그램 간 상호작용을 지원하는 계층

**6계층 - 표현 계층**

- 통신을 위한 데이터를 암호화 및 압축하여 표현하는 계층이다. 이렇게 압축되고 암호화된 데이터에는 데이터의 유형과 데이터 전송 길이 등이 포함된 헤더가 붙은 다음 세션 계층으로 전달된다.

**5계층 - 세션 계층**

- 데이터를 보낼 논리적인 연결 통로를 확보하기 위한 세션을 만드는 계층
- 표현 계층에서 압축 및 암호화된 데이터를 생성해도 데이터를 보낼 통로가 없으면 아무 의미가 없다.
- 통신을 하려면 데이터를 보낼 송수신 장치 간의 통로를 만들어 이를 유지하고 동기화하는 과정 필요
- 데이터 열의 중간중간에 **동기화 지점(Synchronization Point ,SYN)**이 삽입
- 송신과 수신 측 사이의 세션이 끊기거나 데이터 전송 도중 오류가 발생했을 때, 삽입한 SYN 포인트를 기준으로 세션을 재동기화하거나 오류 발생 부분을 파악하여 복구하기 위한 것
- 데이터 유형과 데이터 전송 길이 등이 포함된 헤더가 붙은 다음 또다시 전송계층으로 전달된다.

**4계층 - 전송 계층**

- 연결된 연결통로로 데이터를 보내야하는데, 데이터를 한 번에 보내기에는 크기가 커서 전송 지연이 발생할 수 있습니다.
- 우선 데이터를 분할한 다음, 데이터를 일정한 크기 단위로 분할하는 과정을 **세그멘테이션**이라고 하며, 세그멘테이션을 통해 분할한 후 앞에 헤더 정보가 붙어 생성된 데이터를 세그먼트라고 한다.
- 그리고 세그먼트들을 가지고 데이터를 전송하는 계층이 바로 전송계층
- 전송계층에서 생성된 세그먼트들은 목적지에서 **다시 정확히 재조립될 수 있도록 순서번호**(Sequence Number)를 가지며, 이는 각 세그먼트의 헤더 정보에 포함된다.
- 이외에도 세그먼트의 헤더에는 데이터를 보내는 송수신지의 포트 번호도 포함되는데, 여기서 말하는 포트번호는 스위치와 같은 네트워크 장비의 물리적인 포트 번호가 아니라 데이터가 지나는 통신 세션을 구분하기 위한 번호
- 서버-클라이언트 구조에서 포트 번호로 구분되는 세션 정보
  - 웹브라우저는 80, FTP서버는 21
  - 세션은 여러 개 구축할 수 있으며, 각각은 포트 번호로 구분된다.
  - 클라이언트가 웹 브라우저를 통해 웹 서버에 접속할 때는 보통 포트번호 80번을 기본값으로 사용하고, 파일 전송을 지원하는 FTP 을 이용하여 FTP 서버로 접속할 때는 보통 21번 포트를 기본값으로 사용한다.
- 전송계층의 장비는 포트 번호를 확인하고, 데이터를 전송하는데, 이 때의 장비를 OSI 참조 모델의 4계층에 해당하는 네트워크 장비라는 의미로 L4 스위치라고 부른다.
- 여기서 포트 번호 기반의 세션을 활용하는 전송계층의 대표적인 프로토콜이 바로 TCP,UDP이다.

**3계층 - 네트워크 계층**

- **논리적인 주소**를 토대로 데이터를 목적지까지 전달하는 계층

- IP 주소, MAC 주소 중 IP 주소 활용

- 네트워크 계층에서의 데이터는 앞의 **전송 계층에서 전달된 세그먼트 앞에 헤더 정보가 붙어 패킷으로 정의**된 데이터

- 이러한 **패킷**의 헤더 정보에는 **데이터의 출발지와 목적지 IP 주소**가 포함된다.

- 라우터와 같은 네트워크 장비를 통해 이루어지는 라우팅 경로 설정 과정들은 모두 네트워크 계층에서 이루어진다.

- 라우터와 같은 네트워크 장비를 OSI 참조 모델의 3계층에 해당하느 네트워크 장비를 **L3 스위치**라고 부른다.

  

**2계층 - 데이터링크 계층**

- 두 번째 계층인 데이터링크 계층은 **물리적인 주소**를 토대로 데이터를 목적지까지 전달하는 계층
- 바로 앞의 네트워크 계층에서는 IP 주소를 통해 논리적인 주소를 지정하여 데이터를 전달했다면, 제2계층에서는 물리적인 주소인 **MAC 주소**를 목적지 주소로 지정하여 데이터를 전달

- 데이터 링크 계층에서의 데이터는 앞의 네트워크 계층에서 전달된 패킷 앞에 헤더와 트레일러 정보가 붙어 **프레임**으로 정의된 데이터
- 이러한 프레임의 헤더 정보에는 데이터의 출발지와 목적지 MAC 주소가 포함되어 있어서 스위치와 같은 네트워크 장비들이 MAC 주소를 통해 데이터가 목적지까지 전달될 수 있도록 한다. = 스위칭
- 스위칭을 수행하는 네트워크 장비인 스위치를 OSI 참조 모델의 2계층에 해당하는 네트워크 장비라는 의미로 **L2 스위치**라고 부르기도 한다.
- 데이터 링크 계층에서는 다른 계층과는 달리 데이터의 앞에 붙는 헤더 외에도 트레일러 정보가 붙어 프레임을 구성
- 트레일러는 데이터 프레임의 오류검출에 필요한 4바이트 크기의 **프레임 검사 시퀀스(FCS)**라는 필드를 포함한다.
  - 그래서 데이터 수신 측이 가지고 있는 FCS 값과 전달된 데이터 프레임의 FCS 필드 값을 비교하여 두 값이 같으면 프레임이 오류 없이 성공적으로 전송되었다고 판단, 값이 다르면 오류가 있으므로 프레임을 폐기한 뒤 송신 측에 프레임의 재전송을 요청한다.

**1계층 - 물리 계층**

- 전송채널을 통해 전기적인 신호로 데이터를 실제로 주고 받는 계층
- OSI 계층의 제일 밑바닥에서 전송채널을 통해 데이터를 전기적인 신호로 전달하는 계층
- 물리계층에서는 더이상 데이터를 전달해줄 하위 계층이 없기 때문에 헤더 정보 추가 없이 바로 데이터 프레임을 전기적 신호로 변환하여 데이터 수신 측의 물리 계층으로 전달한다.
- 전기적 신호는 0과 1로 구성된 비트 단위의 디지털 신호를 뜻하며 비트들이 모여 비트열의 데이터로 복원됨으로써 메시지가 최종적으로 수신 측에서 전달될 수 있는 것이다.
- 물리 계층은 단순히 데이터를 전기적인 데이터 신호로 변환하여 송수신하는 역할만 수행하기 때문에 전기적인 신호를 증폭하는 리피터, 그리고 전기적인 신호를 복사하여 연결된 네트워크 채널로 단순 전달하는 허브 장비가 물리 계층의 대표적인 네트워크 장비에 해당된다.
- 그 외에 랜케이블과 같은 전송채널과 전송 케이블이 연결되는 송수신 컴퓨터의 랜카드(NIC) 장치도 여기에 포함된다.

![IMG_0838](https://user-images.githubusercontent.com/46207836/120773822-a6246c00-c55c-11eb-809b-1cd3c8372322.JPG)



### TCP/IP와 OSI 참조 모델

TCP/IP는 인터넷에 연결하기 위한 기본 통신 프로토콜이다. 여기서 IP는 인터넷 프로토콜의 약자로 **OSI 7계층 중 네트워크 계층(3계층)**에서 활용되는 프로토콜이다. 이 프로토콜에서는 전송해야할 데이터를 패킷 단위로 나누고, 나뉜 패킷의 헤더에 목적지 주소를 지정하여 어떻게 데이터를 전달할지가 정의되어 있다.

**TCP**는 전송 제어 프로토콜(Transmission Control Protocol)의 약자로 인터넷 프로토콜 기반의 **데이터 패킷들이 목적지까지 전달되는 과정을 추적 관리하여 안정적으로 연결될 수 있게 지원하는 프로토콜**이다.

TCP/IP는 인터넷 프로토콜과 전송 제어 프로토콜을 함께 부르는 명칭이기는 하지만 실제로는 IP와 TCP 이외에도 두 종단 간에 데이터를 주고받기 위한 100여 개의 관련 프로토콜들이 여기에 100 여개의 관련 프로토콜들이 여기에 포함된다.

우리가 많이 사용하는 E-mail, FTP, 홈페이지, SNS, 블로그 등 대부분의 인터넷 서비스들이 TCP/IP기반으로 만들어졌다. TCP/IP 프로토콜의 구조를 OSI 참조 모델 관점에서 바라보면 7계층이 아니라 4계층으로 표현된다.

먼저 1계층은 네트워크 접근 계층 - 물리 계층, 데이터링크 계층

2계층인 인터넷 계층 - 네트워크 계층 (IP 패킷에 대한 라우팅 기능)

3계층인 전송 계층 - 전송계층으로 실제 데이터 전달이 이루어지는 계층

4계층인 응용 계층 - 세션, 표현, 응용 계층

![IMG_0844](https://user-images.githubusercontent.com/46207836/120818170-527e4680-c58d-11eb-854a-2e64f3909a4b.JPG)



